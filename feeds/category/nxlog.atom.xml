<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Mis notas</title><link href="https://okelet.github.io/" rel="alternate"></link><link href="https://okelet.github.io/feeds/category/nxlog.atom.xml" rel="self"></link><id>https://okelet.github.io/</id><updated>2014-09-15T14:24:26+02:00</updated><entry><title>Compilar NXLOG en Red Hat/CentOS 5</title><link href="https://okelet.github.io/posts/2014/09/compilar-nxlog-en-red-hatcentos-5/" rel="alternate"></link><updated>2014-09-15T14:24:26+02:00</updated><author><name>Juan Asensio Sánchez</name></author><id>tag:okelet.github.io,2014-09-15:posts/2014/09/compilar-nxlog-en-red-hatcentos-5/</id><summary type="html">&lt;p&gt;&lt;a href="http://nxlog-ce.sourceforge.net"&gt;NXLOG&lt;/a&gt; es un sustituto revitalizado para &lt;a href="http://es.wikipedia.org/wiki/Syslog"&gt;Syslog&lt;/a&gt;. Puede recoger los mensajes tanto desde Windows como de Linux, aplicar reglas, y luego enviarlo a distintos sitios (archivos, bases de datos, servicios web, etc.). El caso es que necesitaba instalar este paquete en un CentOS 5 para enviar los LOGs a un servicio web de indexación, pero no había paquetes precompilados para esta versión.&lt;/p&gt;


&lt;p&gt;Tras leer la documentación, indicaban que lo único que hay que hacer es bajarse el código fuente y ejecutar el comando &lt;code&gt;./make_rpm.sh&lt;/code&gt;. El caso es que esto tampoco funcionaba, pero después de dar 20000 vueltas, y de pura casulalidad, vi que había 2 ficheros &lt;a href="http://www.rpm.org/max-rpm/ch-rpm-inside.html"&gt;SPEC&lt;/a&gt;: uno llamado &lt;code&gt;nxlog.spec&lt;/code&gt; y otro llamado &lt;code&gt;nxlog.spec.RHEL5&lt;/code&gt;. Mirando el código del script &lt;code&gt;make_rpm.sh&lt;/code&gt; he visto que si no se especifica ningún fichero mediante entorno de variable, automáticamente coge el &lt;code&gt;nxlog.spec&lt;/code&gt;, así que lo único que hay que hacer es indicarle mediante una variable de entorno el otro fichero SPEC. Fácil y sencillo (después de darle muchas vueltas)...&lt;/p&gt;
&lt;p&gt;Aquí el &lt;a href="http://es.wikipedia.org/wiki/Cortar,_copiar_y_pegar"&gt;copy-paste&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;NXLOG_VERSION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;2.8.1248
yum install rpm-build apr-devel pcre-devel openssl-devel libdbi-devel libcap-devel expat-devel libtool
wget http://sourceforge.net/projects/nxlog-ce/files/nxlog-ce-&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;NXLOG_VERSION&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.tar.gz
tar zxvf nxlog-ce-&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;NXLOG_VERSION&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;.tar.gz
&lt;span class="nb"&gt;cd&lt;/span&gt; nxlog-ce-&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;NXLOG_VERSION&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;/packaging/redhat
&lt;span class="nv"&gt;SPEC_FILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;nxlog.spec.RHEL5 ./make_rpm.sh
rpm -Uvh rpmbuild/RPMS/x86_64/nxlog-ce-&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;NXLOG_VERSION&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;-1.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;</summary></entry></feed>