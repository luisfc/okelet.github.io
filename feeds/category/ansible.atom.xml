<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Mis notas</title><link href="https://okelet.github.io/" rel="alternate"></link><link href="https://okelet.github.io/feeds/category/ansible.atom.xml" rel="self"></link><id>https://okelet.github.io/</id><updated>2016-04-05T00:00:00+02:00</updated><entry><title>Ansible sin root</title><link href="https://okelet.github.io/posts/2016/04/ansible-sin-root/" rel="alternate"></link><updated>2016-04-05T00:00:00+02:00</updated><author><name>Juan Asensio Sánchez</name></author><id>tag:okelet.github.io,2016-04-05:posts/2016/04/ansible-sin-root/</id><summary type="html">&lt;p&gt;Cuando se instala Ansible, por defecto va a usar la configuración y fichero de hosts del directorio &lt;code&gt;/etc/ansible&lt;/code&gt;. Si queremos poder ejecutar Ansible sin necesidad de estar tocando continuamente ficheros de configuración con root, podemos crear un archivo de configuración y otro de hosts en nuestro directorio personal, que prevalecerán sobre los que hay en &lt;code&gt;/etc/ansible&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Para ello, crearemos el &lt;a href="http://docs.ansible.com/ansible/intro_configuration.html#configuration-file"&gt;fichero de configuración&lt;/a&gt; &lt;code&gt;~/.ansible.cfg&lt;/code&gt; con el siguiente contenido:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[defaults]
inventory = ~/.ansible_hosts
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Y tras esto, crear el &lt;a href="http://docs.ansible.com/ansible/intro_inventory.html"&gt;archivo de hosts&lt;/a&gt; al que hacemos referencia:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;localhost
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Para probar que Ansible está cogiendo esta configuración, ejecutaremos el siguiente comando (muestra los &lt;a href="http://docs.ansible.com/ansible/intro_inventory.html"&gt;&lt;code&gt;facts&lt;/code&gt; del servidor&lt;/a&gt; que cumplan el filtro &lt;code&gt;ansible_eth[0-2]&lt;/code&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ansible localhost -m setup -a &lt;span class="s1"&gt;&amp;#39;filter=ansible_eth[0-2]&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;br/&gt;El artículo &lt;a href="https://okelet.github.io/posts/2016/04/ansible-sin-root/"&gt;Ansible sin root&lt;/a&gt; fue publicado por primera vez en &lt;a href="https://okelet.github.io"&gt;Mis notas&lt;/a&gt; por Juan Asensio Sánchez.</summary></entry></feed>